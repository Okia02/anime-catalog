{"version":3,"sources":["01_global.js","02_fetch.js","03_render.js","04_handler.js","05_localStorage.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["\"use strict\";\n\nconst inputSearch = document.querySelector(\".js-input-search\");\nconst submitBtn = document.querySelector(\".js-submit-btn\");\nconst resetBtn = document.querySelector(\".js-reset-btn\");\nconst searchResults = document.querySelector(\".js-result-list\");\nconst resetBtnFav = document.querySelector(\".js-reset-btn-fav\");\nconst favResults = document.querySelector(\".js-fav-list\");\n\nlet animes = [];\nlet favAnimes = [];\n","\"use strict\";\n\nfunction getUserInput(ev) {\n  ev.preventDefault();\n  fetch(`https://api.jikan.moe/v3/search/anime?q=${inputSearch.value}`)\n    .then((response) => response.json())\n    .then((animesData) => {\n      animes = animesData.results;\n      renderResults();\n    });\n}\n\nfunction handlerResetBtnFav(ev) {\n  ev.preventDefault();\n  favResults.innerHTML = \"\";\n  localStorage.clear();\n  location.reload();\n}\n\nfunction handlerResetBtn(ev) {\n  ev.preventDefault();\n  location.reload();\n}\n\nsubmitBtn.addEventListener(\"click\", getUserInput);\n\nresetBtn.addEventListener(\"click\", handlerResetBtn);\n\nresetBtnFav.addEventListener(\"click\", handlerResetBtnFav);\n\n\n","\"use strict\";\n\nfunction renderResults() {\n  searchResults.innerHTML = \"\";\n  for (const anime of animes) {\n    const animeInFav = favAnimes.find((fav) => fav.mal_id === anime.mal_id);\n    let favAdd = \"\";\n    animeInFav !== undefined ? (favAdd = \"fav\") : (favAdd = \"\");\n    let airingAnime =\n      anime.airing === true\n        ? `<a class='js-airing' href='${anime.url}'>Más detalles</a>`\n        : `<p class='js-not-airing'>No se está transmitiendo</p>`;\n    searchResults.innerHTML += `<li class='li-element js-li-element ${favAdd}' id='${\n      anime.mal_id\n    }'><img class='anime-img' src='${\n      anime.image_url ||\n      \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\"\n    }'><h3 class='anime-title'>${\n      anime.title\n    }</h3><div>${airingAnime}</div></li>`;\n  }\n  handlerClickedAnime();\n}\n\nfunction renderFavResults() {\n  favResults.innerHTML = \"\";\n  for (let i = 0; i < favAnimes.length; i++) {\n    const favAnime = favAnimes[i];\n    favResults.innerHTML += `<li class='li-element js-li-element' id='${\n      favAnime.mal_id\n    }'><img class='anime-img' src='${\n      favAnime.image_url ||\n      \"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\"\n    }'><h3 class='anime-title'>${\n      favAnime.title\n    }</h3><i class=\"fas fa-times\"></i></li>`;\n  }\n  handlerClickedAnime();\n}\n","\"use strict\";\n\nfunction handlerClickedFav(ev) {\n  ev.preventDefault();  \n  const clickedAnime = parseInt(ev.currentTarget.id);\n  const favClicked = favAnimes.findIndex((fav) => {    \n    return fav.mal_id === clickedAnime;\n  });\n  if (favClicked === -1) {\n    const animeAdd = animes.find((animeElement) => {\n      return animeElement.mal_id === clickedAnime;\n    }); \n    favAnimes.push(animeAdd);\n  } else {\n    favAnimes.splice(favClicked, 1);\n    console.log(favAnimes[favClicked].title);\n  }\n  renderResults();\n  renderFavResults();\n  setInLocalStorage();\n}\n\nfunction handlerClickedAnime() {\n  const animesListened = document.querySelectorAll(\".js-li-element\");\n  for (const animeListened of animesListened) {\n    animeListened.addEventListener(\"click\", handlerClickedFav);\n  }\n}\n","\"use strict\";\n\nfunction setInLocalStorage() {\n  const toString = JSON.stringify(favAnimes);\n  localStorage.setItem(\"anime\", toString);\n}\n\nfunction getInLocalStorage() {\n  const localStorageFavAnimes = localStorage.getItem(\"anime\");\n  favAnimes = JSON.parse(localStorageFavAnimes);\n  if (favAnimes === null) {\n    favAnimes = [];\n  } else {\n    renderFavResults();\n  }\n}\ngetInLocalStorage();\n"]}